!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Tumbling={})}(this,function(e){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}var r=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.toThousands=function(e){if(null==e)return"- -";var t=(e||0).toString(),n=t.indexOf(".");if(n>=0){var r=t.substring(0,n),i=t.substring(n+1);return keepFloat?r.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+"."+i:r.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")}return t.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")},t.setTransformStyle=function(e,t){e.style.transform=t,e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t},t.setTransformByStyle=function(e,t){return"transform:"+t+";webkit-transform:"+t+";moz-transform:"+t+";ms-transform:"+t+";o-transform:"+t};t.NUMBER_REG=new RegExp("[0-9]")});t(r);var i=n(function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){n(this,e),this.context=t,(r.rotateDirection||e.VERTICAL)===e.VERTICAL?this.rotateName="rotateY":this.rotateName="rotateX",this.renderItem=r.renderItem,this.wrapper=null,this.scroller=null,this.firstLi=null,this.secondLi=null}return i(e,[{key:"mount",value:function(e){var t=this.context.showCurValue;this.wrapper=e,e.className="tumbling-wrapper tumblingFlip-wrapper",e.innerHTML='\n            <span class="tumbling-hidden-span">'+(this.renderItem?this.renderItem(9):9)+'</span>\n            <ul class="tumbling-scroller">\n                <li>'+(this.renderItem?this.renderItem(t):t)+"</li>\n                <li></li>\n            </ul>\n        ",this.scroller=e.children[e.children.length-1],this.firstLi=this.scroller.children[0],this.secondLi=this.scroller.children[1]}},{key:"getRotateStyle",value:function(e){return this.rotateName+"("+e+"deg)"}},{key:"render",value:function(t,n){if(0!==t){var r=this.context,i=r.showNextValue,a=r.showCurValue,o=r.showPrevValue;t>0?(e.renderText(this.firstLi,i,this.getRotateStyle(-180*(1-n))),e.renderText(this.secondLi,a,this.getRotateStyle(180*n))):(e.renderText(this.firstLi,a,this.getRotateStyle(-180*n)),e.renderText(this.secondLi,o,this.getRotateStyle(180*(1+n))))}}}],[{key:"renderText",value:function(e,t,n){var i="";null!=t&&t>=0&&(i=t+""),this.renderItem&&(i=this.renderItem(i)),(0,r.setTransformStyle)(e,n),e.innerHTML=i}}]),e}();a.HORIZONTAL=1,a.VERTICAL=2,t.default=a});t(i);var a=n(function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){n(this,e),this.context=t,this.renderItem=r.renderItem,this.wrapper=null,this.scroller=null,this.firstLi=null,this.secondLi=null}return i(e,[{key:"mount",value:function(e){this.wrapper=e,e.className="tumbling-wrapper",e.innerHTML='\n            <span class="tumbling-hidden-span">'+(this.renderItem?this.renderItem(9):9)+'</span>\n            <ul class="tumbling-scroller">\n                <li>'+(this.renderItem?this.renderItem(this.showCurValue):this.showCurValue)+"</li>\n                <li></li>\n            </ul>\n        ",this.scroller=e.children[e.children.length-1],this.firstLi=this.scroller.children[0],this.secondLi=this.scroller.children[1]}},{key:"render",value:function(t,n){var i=this.context,a=i.showNextValue,o=i.showCurValue,s=i.showPrevValue;t>0?(n-=1,e.renderText(this.firstLi,a),e.renderText(this.secondLi,o)):0===t?e.renderText(this.firstLi,o):(e.renderText(this.firstLi,o),e.renderText(this.secondLi,s)),(0,r.setTransformStyle)(this.scroller,"translateY("+100*n+"%)")}}],[{key:"renderText",value:function(e,t){var n="";null!=t&&t>=0&&(n=t+""),this.renderItem&&(n=this.renderItem(n)),e.innerHTML=n}}]),e}();t.default=a});t(a);var o=n(function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(a),o=Object.assign,s={},u=function(){function e(t,r){n(this,e);var a=o({},s,r);this.dom=document.querySelector(t);var u=a.renderItem,l=a.animationRender,h=a.appearAnimation,c=a.disappearAnimation,f=a.animationFlag,p=a.tween,m=a.effect;this.animateTimeStamp=null,this.animateId=null,this.effect=m||i.default,this.value=r.value,this.startedFlag=!1,this.transitionTime=r.transitionTime||300,this.renderItem=u,this.appearAnimation=h,this.animationRender=l,this.tween=p,this.disappearAnimation=c,this.animationFlag=f,this.animate=this.animate.bind(this)}return r(e,[{key:"clear",value:function(){}},{key:"animate",value:function(e){if(null==this.animateTimeStamp)return this.animateTimeStamp=e,void window.requestAnimationFrame(this.animate);var t=e-this.animateTimeStamp,n=!1;if(t>=this.transitionTime&&(n=!0,t=this.transitionTime,this.animateTimeStamp=null,this.clear()),this.render(t,n),n)return this.animateStop&&this.animateStop(e),void(this.animateId=null);this.animateId=window.requestAnimationFrame(this.animate)}},{key:"complete",value:function(){this.animateId&&(window.cancelAnimationFrame(this.animateId),this.animateId=null,this.clear(),this.render(this.transitionTime,!0))}},{key:"render",value:function(){}},{key:"start",value:function(){this.beforeStart&&this.beforeStart(),this.startedFlag?this.complete():this.startedFlag=!0,this.value&&(this.animateId=window.requestAnimationFrame(this.animate))}}]),e}();t.default=u});t(o);var s=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={linear:function(e,t,n,r){return e/r*(n-t)+t},easeInQuad:function(e,t,n,r){return n*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return n*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){return 0==e?t:n*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){return e==r?t+n:n*(1-Math.pow(2,-10*e/r))+t},easeInOutExpo:function(e,t,n,r){return 0==e?t:e==r?t+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,r){var i=1.70158,a=0,o=n;if(0==e)return t;if(1==(e/=r))return t+n;if(a||(a=.3*r),o<Math.abs(n)){o=n;i=a/4}else i=a/(2*Math.PI)*Math.asin(n/o);return-o*Math.pow(2,10*(e-=1))*Math.sin((e*r-i)*(2*Math.PI)/a)+t},easeOutElastic:function(e,t,n,r){var i=1.70158,a=0,o=n;if(0==e)return t;if(1==(e/=r))return t+n;if(a||(a=.3*r),o<Math.abs(n)){o=n;i=a/4}else i=a/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*e)*Math.sin((e*r-i)*(2*Math.PI)/a)+n+t},easeInOutElastic:function(e,t,n,r){var i=1.70158,a=0,o=n;if(0==e)return t;if(2==(e/=r/2))return t+n;if(a||(a=r*(.3*1.5)),o<Math.abs(n)){o=n;i=a/4}else i=a/(2*Math.PI)*Math.asin(n/o);return e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e*r-i)*(2*Math.PI)/a)*-.5+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*r-i)*(2*Math.PI)/a)*.5+n+t},easeInBack:function(e,t,n,r,i){return void 0==i&&(i=1.70158),n*(e/=r)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,n,r,i){return void 0==i&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,r,i){return void 0==i&&(i=1.70158),(e/=r/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:function(e,t,r,i){return r-n.easeOutBounce(i-e,0,r,i)+t},easeOutBounce:function(e,t,n,r){return(e/=r)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,r,i){return e<i/2?.5*n.easeInBounce(2*e,0,r,i)+t:.5*n.easeOutBounce(2*e-i,0,r,i)+.5*r+t}};t.default=n});t(s);var u=n(function(e,t){function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.BaseItem=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(s),u=t.BaseItem=function(){function e(t,n,r){i(this,e);var a=t.effect,o=t.appearAnimation,s=t.disappearAnimation,u=t.animationFlag,l=t.dom,h=t.renderItem,c=t.tween;this.context=t,this.value=n,this.index=r.index,this.rawMode=r.rawMode||!1,this.rawDirection=r.rawDirection||1,this.visible=!1,this.wrapper=null,this.effectController=new a(this,r),this.moveRatio=1,this.animationFlag=u||!0,this.parentDom=l,this.renderItem=h,this.tween=e.parseTween(c),this.newBornFlag=r.newBornFlag||!1,this.appearAnimation=o,this.disappearAnimation=s,this.disappearFlag=!1}return a(e,[{key:"getWrapperWidth",value:function(){return this.wrapperWidth?this.wrapperWidth:(this.wrapperWidth=this.wrapper.offsetWidth,this.wrapperWidth)}},{key:"disappear",value:function(){this.disappearFlag=!0}},{key:"animateRender",value:function(){if(this.visible||(this.wrapper.className+=" tumbling-wrapper-visible",this.visible=!0,this.getWrapperWidth()),this.disappearFlag)this.disappearAnimation?this.disappearAnimation(this.wrapper,this.moveRatio):this.animationFlag&&(this.wrapper.style.width=this.wrapperWidth*this.moveRatio+"px",this.wrapper.style.opacity=this.moveRatio);else if(this.newBornFlag){var e=1-this.moveRatio;this.appearAnimation?this.appearAnimation(this.wrapper,e):this.animationFlag&&(this.wrapper.style.width=this.wrapperWidth*e+"px",this.wrapper.style.opacity=e)}}}],[{key:"parseTween",value:function(e){return e?"function"==typeof e?e:o.default[e]:o.default.linear}}]),e}(),l=function(e){function t(e,r,a){i(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a));return o.value=0,o.isNumber=!0,o.baseRange=a.baseRange,o.diffDistance=0,o.maxValue=a.maxValue||10,o.moveY=0,o.showCurValue=0,o.update(r),o}return r(t,u),a(t,[{key:"mount",value:function(e){var t=document.createElement("div");return this.effectController.mount(t),this.wrapper=t,this.visible=!1,e.appendChild(t),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.rawMode){if(this.showPrevValue=this.showNextValue=e,e===this.value)return void(this.diffDistance=0);this.diffDistance=this.rawDirection,this.value=e}else{var n=t.floor(e/this.baseRange),r=n-this.value;this.diffDistance=r,this.value=n,this.showPrevValue=this.add(this.showCurValue,-1),this.showNextValue=this.add(this.showCurValue,1),this.originCurValue=this.showCurValue}}},{key:"processNumber",value:function(e,n){var r=t.floor((e+n)%this.maxValue);return r<0?this.maxValue+r:r}},{key:"add",value:function(e,t){var n=e+t;return n>=this.maxValue?0:n<0?this.maxValue-1:n}},{key:"updateValue",value:function(e){var n=t.floor(e);this.showCurValue=this.processNumber(this.originCurValue,n),this.showPrevValue=this.add(this.showCurValue,-1),this.showNextValue=this.add(this.showCurValue,1)}},{key:"updateRawValue",value:function(e){1!==e&&-1!==e||(this.showCurValue=this.showPrevValue,this.showPrevValue=this.showNextValue=this.showCurValue)}},{key:"move",value:function(e,t){var n=void 0,r=this.context.transitionTime;t&&this.newBornFlag&&(this.newBornFlag=!1),0!==this.diffDistance&&(n=e===r?this.diffDistance:this.tween(e,0,this.diffDistance,r),this.moveRatio=(r-e)/r,this.moveY=n,this.rawMode?this.updateRawValue(n):this.updateValue(n))}},{key:"remove",value:function(){this.parentDom&&this.wrapper&&(this.parentDom.removeChild(this.wrapper),this.wrapper=null)}},{key:"render",value:function(){var e=this.diffDistance;if(0!==e){var t=this.moveY%1;this.animateRender(),this.effectController.render(e,t)}}}],[{key:"floor",value:function(e){return e<0?-Math.floor(-e):Math.floor(e)}}]),t}(),h=function(e){function t(e,r,a){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a))}return r(t,u),a(t,[{key:"mount",value:function(e){var t=document.createElement("div");return t.className="tumbling-wrapper",t.innerHTML=this.value,this.wrapper=t,e.appendChild(t),this}},{key:"remove",value:function(){this.parentDom&&this.wrapper&&(this.parentDom.removeChild(this.wrapper),this.wrapper=null)}},{key:"move",value:function(e,t){var n=this.context.transitionTime;this.moveRatio=(n-e)/n}},{key:"update",value:function(){}},{key:"render",value:function(){this.animateRender()}}]),t}();t.default=function(e,t,n,r){return r?new l(e,t,n):new h(e,t,n)}});t(u);var l=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(o),c=n(u),f=Object.assign,p=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=n.thousand;return r.thousand=o,r.options=n,r.generateNumberItems(r.value),r}return s(t,h.default),l(t,[{key:"generateDomItem",value:function(e,t,n,r,i,a){return(0,c.default)(this,t,f({},this.options,{index:n,newBornFlag:a,baseRange:i,maxValue:r}),e)}},{key:"generateNumberItems",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=t.parseValue(n,this.thousand),a=i.valueStr,o=i.transformValueStr,s=a.length-1,u=document.createDocumentFragment();this.strItems={};var l=0,h=[];a.forEach(function(t,i){var a=Math.pow(10,s-i),c=o[l];if(!r.NUMBER_REG.test(c)){var f=e.generateDomItem(!1,c,i,10,a).mount(u);e.strItems[s-l]=f,l++}l++,h.push(e.generateDomItem(!0,n,i,10,a).mount(u))}),this.items=h,this.dom.appendChild(u)}},{key:"update",value:function(e){if(this.complete(),e!==this.value){var n=t.parseValue(e,this.thousand),i=n.valueStr,a=n.transformValueStr,o=this.items.length,s=i.length,u=s-o,l=void 0;if(u>0){l=[];for(var h=document.createDocumentFragment(),c=s-1,f=0,p=void 0,m=0;m<s;m++){var d=Math.pow(10,c-m),v=a[f];if(p=c-f,!r.NUMBER_REG.test(v)){if(!this.strItems[p]){var w=this.generateDomItem(!1,v,m,10,d,!0).mount(h);this.strItems[p]=w}f++}m<u&&l.push(this.generateDomItem(!0,e,m,10,d,!0).mount(h)),f++}this.dom.insertBefore(h,this.dom.children[0])}else if(u<0){for(var y=0;y<-u;y++)this.items[y].disappear();for(var b in this.strItems){var g=this.strItems[b];(r.NUMBER_REG.test(a[b])||b>=a.length)&&g.disappear()}}this.items.forEach(function(t){t.update(e)}),l&&(this.items=l.concat(this.items)),this.animateId=window.requestAnimationFrame(this.animate),this.value=e}}},{key:"clear",value:function(){this.items=this.items.filter(function(e){return e.disappearFlag&&e.remove(),!e.disappearFlag});for(var e in this.strItems){var t=this.strItems[e];t.disappearFlag&&(t.remove(),delete this.strItems[e])}}},{key:"render",value:function(e,t){this.items.forEach(function(n,r){e&&n.move(e,t),n.render()});for(var n in this.strItems){var r=this.strItems[n];r.move(e,t),r.render()}}}],[{key:"parseValue",value:function(e,t){var n=parseInt(e),i=(""+n).split(""),a=i;return t&&(a=(0,r.toThousands)(n).split("")),{valueStr:i,transformValueStr:a}}}]),t}();t.default=p});t(l);var h=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(o),c=n(u),f=Object.assign,p=function(e){function t(e,n){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.value=t.transformValue(a.value),a.stopImmediate=n.stopImmediate||!1,a.maxRandomStep=n.maxRandomStep||100,a.debounceRatio=n.debounceRatio||.3,a.stopFlag=!1,a.onStop=n.onStop,a.options=n,a.generateRawItems(a.value),a}return a(t,h.default),l(t,[{key:"generateRawItems",value:function(e){var t=this,n=document.createDocumentFragment();this.items=e.map(function(e,r){return e.step=e.step||Math.floor(Math.random()*t.maxRandomStep),(0,c.default)(t,e.step,f({},t.options,{index:r,baseRange:1,maxValue:e.maxValue||10}),!0).mount(n)}),this.dom.appendChild(n)}},{key:"animateStop",value:function(e){var t=this;this.stopFlag?this.onStop&&this.onStop(this.items.map(function(e){return e.value%e.maxValue},this)):e&&(this.value.forEach(function(e,n){var r=t.items[n];r.update(r.value+e.step),r.value=r.value%r.maxValue}),this.animateTimeStamp=e,this.animateId=window.requestAnimationFrame(this.animate))}},{key:"render",value:function(e,t){this.items.forEach(function(n,r){e&&n.move(e,t),n.render()})}},{key:"beforeStart",value:function(){this.stopFlag=!1}},{key:"stop",value:function(){var e=this;if(this.stopFlag=!0,this.animateId){if(window.cancelAnimationFrame(this.animateId),this.animateId=null,this.render(this.transitionTime,!0),this.stopImmediate)return void this.animateStop();this.value.forEach(function(t,n){var r=e.items[n];r.update(r.value+Math.floor(t.step*e.debounceRatio))}),this.animateId=window.requestAnimationFrame(this.animate)}}}],[{key:"transformValue",value:function(e){if("object"!==(void 0===e?"undefined":s(e))){for(var t=[],n=0;n<e;n++)t.push({});return t}return e}}]),t}();t.default=p});t(h);var c=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(o),c=n(u),f=Object.assign,p=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.options=n,r.direction=n.direction||t.ADD,r.init(r.value),r}return s(t,h.default),l(t,[{key:"init",value:function(e){var n=this,i=(e+"").split(""),a=document.createDocumentFragment();this.items=i.map(function(e,i){var o=r.NUMBER_REG.test(e),s=o?parseInt(e):e;return(0,c.default)(n,s,f({},n.options,{index:i,rawDirection:n.direction===t.ADD?1:-1,rawMode:!0}),o).mount(a)}),this.dom.appendChild(a)}},{key:"update",value:function(e){var t=this;this.animateId&&(window.cancelAnimationFrame(this.animateId),this.animateId=null,this.render(this.transitionTime,!0)),e!==this.value&&((e+"").split("").forEach(function(e,n){var r=t.items[n];if(r.isNumber){var i=parseInt(e);r.update(i)}}),this.animateId=window.requestAnimationFrame(this.animate),this.value=e)}},{key:"render",value:function(e,t){this.items.forEach(function(n,r){e&&n.move(e,t),n.render()})}}]),t}();p.ADD=0,p.MINUS=1,t.default=p});t(c),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},writable:!0,configurable:!0}),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(function(){e(Date.now())},100)};var f=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Countdown=t.DomRawScroller=t.DomNumberScroller=t.FlipRender=void 0,Object.defineProperty(t,"FlipRender",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(t,"DomNumberScroller",{enumerable:!0,get:function(){return n(l).default}}),Object.defineProperty(t,"DomRawScroller",{enumerable:!0,get:function(){return n(h).default}}),Object.defineProperty(t,"Countdown",{enumerable:!0,get:function(){return n(c).default}})}),p=t(f),m=f.Countdown,d=f.DomRawScroller,v=f.DomNumberScroller,w=f.FlipRender;e.default=p,e.Countdown=m,e.DomRawScroller=d,e.DomNumberScroller=v,e.FlipRender=w,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=tumbling.min.js.map
