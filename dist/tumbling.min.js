!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Tumbling={})}(this,function(e){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}var i=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.toThousands=function(e){if(null==e)return"- -";var t=(e||0).toString(),n=t.indexOf(".");if(n>=0){var i=t.substring(0,n),r=t.substring(n+1);return keepFloat?i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+"."+r:i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")}return t.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")},t.setTransformStyle=function(e,t){e.style.transform=t,e.style.webkitTransform=t,e.style.mozTransform=t,e.style.msTransform=t,e.style.oTransform=t},t.setTransformByStyle=function(e,t){return"transform:"+t+";webkit-transform:"+t+";moz-transform:"+t+";ms-transform:"+t+";o-transform:"+t};t.NUMBER_REG=new RegExp("[0-9]")});t(i);var r=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.context=t;var i=n.rotateDirection||e.VERTICAL;this.rotateName=i===e.VERTICAL?"rotateY":"rotateX",this.renderItem=n.renderItem,this.wrapper=null,this.scroller=null,this.firstLi=null,this.secondLi=null}return n(e,[{key:"mount",value:function(e){var t=this.context.showCurValue;this.wrapper=e,e.className="tumbling-wrapper tumblingFlip-wrapper",e.innerHTML='<span class="tumbling-hidden-span">'+(this.renderItem?this.renderItem(-1):9)+'</span>\n<ul class="tumbling-scroller">\n<li>'+(this.renderItem?this.renderItem(t):t)+"</li>\n<li></li>\n</ul>",this.scroller=e.children[e.children.length-1],this.firstLi=this.scroller.children[0],this.secondLi=this.scroller.children[1]}},{key:"getRotateStyle",value:function(e){return this.rotateName+"("+e+"deg)"}},{key:"render",value:function(t,n){if(0!==t){var i=this.context,r=i.showNextValue,a=i.showCurValue,o=i.showPrevValue;t>0?(e.renderText(this.firstLi,r,this.getRotateStyle(-180*(1-n))),e.renderText(this.secondLi,a,this.getRotateStyle(180*n))):(e.renderText(this.firstLi,a,this.getRotateStyle(-180*n)),e.renderText(this.secondLi,o,this.getRotateStyle(180*(1+n))))}}}],[{key:"renderText",value:function(e,t,n){var i="";null!=t&&t>=0&&(i=t+""),this.renderItem&&(i=this.renderItem(i)),_index.setTransformStyle(e,n),e.innerHTML=i}}]),e}();i.HORIZONTAL=1,i.VERTICAL=2,t.default=i});t(r);var a=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={linear:function(e,t,n,i){return e/i*(n-t)+t},easeInQuad:function(e,t,n,i){return n*(e/=i)*e+t},easeOutQuad:function(e,t,n,i){return-n*(e/=i)*(e-2)+t},easeInOutQuad:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,i){return n*(e/=i)*e*e+t},easeOutCubic:function(e,t,n,i){return n*((e=e/i-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,i){return n*(e/=i)*e*e*e+t},easeOutQuart:function(e,t,n,i){return-n*((e=e/i-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,i){return n*(e/=i)*e*e*e*e+t},easeOutQuint:function(e,t,n,i){return n*((e=e/i-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,i){return-n*Math.cos(e/i*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,i){return n*Math.sin(e/i*(Math.PI/2))+t},easeInOutSine:function(e,t,n,i){return-n/2*(Math.cos(Math.PI*e/i)-1)+t},easeInExpo:function(e,t,n,i){return 0==e?t:n*Math.pow(2,10*(e/i-1))+t},easeOutExpo:function(e,t,n,i){return e==i?t+n:n*(1-Math.pow(2,-10*e/i))+t},easeInOutExpo:function(e,t,n,i){return 0==e?t:e==i?t+n:(e/=i/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,i){return-n*(Math.sqrt(1-(e/=i)*e)-1)+t},easeOutCirc:function(e,t,n,i){return n*Math.sqrt(1-(e=e/i-1)*e)+t},easeInOutCirc:function(e,t,n,i){return(e/=i/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,i){var r=1.70158,a=0,o=n;if(0==e)return t;if(1==(e/=i))return t+n;if(a||(a=.3*i),o<Math.abs(n)){o=n;r=a/4}else r=a/(2*Math.PI)*Math.asin(n/o);return-o*Math.pow(2,10*(e-=1))*Math.sin((e*i-r)*(2*Math.PI)/a)+t},easeOutElastic:function(e,t,n,i){var r=1.70158,a=0,o=n;if(0==e)return t;if(1==(e/=i))return t+n;if(a||(a=.3*i),o<Math.abs(n)){o=n;r=a/4}else r=a/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*e)*Math.sin((e*i-r)*(2*Math.PI)/a)+n+t},easeInOutElastic:function(e,t,n,i){var r=1.70158,a=0,o=n;if(0==e)return t;if(2==(e/=i/2))return t+n;if(a||(a=i*(.3*1.5)),o<Math.abs(n)){o=n;r=a/4}else r=a/(2*Math.PI)*Math.asin(n/o);return e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e*i-r)*(2*Math.PI)/a)*-.5+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*i-r)*(2*Math.PI)/a)*.5+n+t},easeInBack:function(e,t,n,i,r){return void 0==r&&(r=1.70158),n*(e/=i)*e*((r+1)*e-r)+t},easeOutBack:function(e,t,n,i,r){return void 0==r&&(r=1.70158),n*((e=e/i-1)*e*((r+1)*e+r)+1)+t},easeInOutBack:function(e,t,n,i,r){return void 0==r&&(r=1.70158),(e/=i/2)<1?n/2*(e*e*((1+(r*=1.525))*e-r))+t:n/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t},easeInBounce:function(e,t,i,r){return i-n.easeOutBounce(r-e,0,i,r)+t},easeOutBounce:function(e,t,n,i){return(e/=i)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,i,r){return e<r/2?.5*n.easeInBounce(2*e,0,i,r)+t:.5*n.easeOutBounce(2*e-r,0,i,r)+.5*i+t}};t.default=n});t(a);var o=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.context=t,this.renderItem=n.renderItem,this.wrapper=null,this.scroller=null,this.firstLi=null,this.secondLi=null}return n(e,[{key:"renderText",value:function(e,t){var n="";null!=t&&t>=0&&(n=t+""),this.renderItem&&(n=this.renderItem(n)),e.innerHTML=n}},{key:"mount",value:function(e){this.wrapper=e,e.className="tumbling-wrapper",e.innerHTML='<span class="tumbling-hidden-span">'+(this.renderItem?this.renderItem(-1):9)+'</span>\n<ul class="tumbling-scroller">\n<li>'+(this.renderItem?this.renderItem(this.showCurValue):this.showCurValue)+"</li>\n<li></li>\n</ul>",this.scroller=e.children[e.children.length-1],this.firstLi=this.scroller.children[0],this.secondLi=this.scroller.children[1]}},{key:"render",value:function(e,t){var n=this.context,i=n.showNextValue,r=n.showCurValue,a=n.showPrevValue;e>0?(t-=1,this.renderText(this.firstLi,i),this.renderText(this.secondLi,r)):0===e?this.renderText(this.firstLi,r):(this.renderText(this.firstLi,r),this.renderText(this.secondLi,a)),_index.setTransformStyle(this.scroller,"translateY("+100*t+"%)")}}]),e}();t.default=i});t(o);var u=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(a),u=n(o),s=Object.assign,l={},f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=s({},l,n),r=e.parseDom(t);this.rootDom=r;var a=document.createElement("div");a.className="tumbling-container",r.appendChild(a),this.dom=a;var o=i.renderItem,f=i.animationRender,c=i.autoStart,h=i.appearAnimation,p=i.disappearAnimation,m=i.animationFlag,d=i.tween,v=i.effect;this.animateTimeStamp=null,this.animateId=null,this.effect=v||u.default,this.value=n.value,this.startedFlag=!1,this.transitionTime=n.transitionTime||300,this.renderItem=o,this.tween=e.parseTween(d),this.appearAnimation=h,this.animationRender=f,this.disappearAnimation=p,this.animationFlag=m,this.items=null,this.strItems=null,this.animate=this.animate.bind(this),c&&this.start()}return i(e,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.transitionTime,i=t.tween;null!=n&&(this.transitionTime=n),null!=i&&(this.tween=e.parseTween(i))}},{key:"changeTween",value:function(t){this.tween=e.parseTween(t)}},{key:"clear",value:function(){}},{key:"animate",value:function(e){if(null==this.animateTimeStamp)return this.animateTimeStamp=e,void window.requestAnimationFrame(this.animate);var t=e-this.animateTimeStamp,n=!1;if(t>=this.transitionTime&&(n=!0,t=this.transitionTime,this.animateTimeStamp=null,this.clear()),this.render(t,n),n)return this.animateStop&&this.animateStop(e),void(this.animateId=null);this.animateId=window.requestAnimationFrame(this.animate)}},{key:"complete",value:function(){this.animateId&&(window.cancelAnimationFrame(this.animateId),this.animateId=null,this.clear(),this.render(this.transitionTime,!0))}},{key:"render",value:function(e,t){if(this.items&&this.items.forEach(function(n,i){e&&n.move(e,t),n.render(t)}),this.strItems)for(var n in this.strItems){var i=this.strItems[n];i.move(e,t),i.render(t)}}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;setTimeout(function(){var t=e;t.animateId||(t.beforeStart&&t.beforeStart(),t.value&&(t.animateId=window.requestAnimationFrame(t.animate)))},t)}}],[{key:"parseDom",value:function(e){return"string"==typeof e?document.querySelector(e):e}},{key:"parseTween",value:function(e){return e?"function"==typeof e?e:r.default[e]:r.default.linear}}]),e}();t.default=f});t(u);var s=n(function(e,t){function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=t.BaseItem=function(){function e(t,n,i){r(this,e);var a=t.effect,o=t.appearAnimation,u=t.disappearAnimation,s=t.animationFlag,l=t.dom,f=t.renderItem;this.context=t,this.value=n,this.index=i.index,this.rawMode=i.rawMode||!1,this.rawDirection=i.rawDirection||1,this.visible=!1,this.wrapper=null,this.hasRender=!1,this.effectController=new a(this,i),this.moveRatio=1,this.animationFlag=s||!0,this.parentDom=l,this.renderItem=f,this.newBornFlag=i.newBornFlag||!1,this.appearAnimation=o,this.disappearAnimation=u,this.disappearFlag=!1}return a(e,[{key:"remove",value:function(){this.parentDom&&this.wrapper&&(this.parentDom.removeChild(this.wrapper),this.wrapper=null)}},{key:"getWrapperWidth",value:function(){return this.wrapperWidth?this.wrapperWidth:(this.wrapperWidth=this.wrapper.offsetWidth,this.wrapperWidth)}},{key:"disappear",value:function(){this.disappearFlag=!0}},{key:"animateRender",value:function(e){if(this.visible||(this.wrapper.className+=" tumbling-wrapper-visible",this.visible=!0,this.getWrapperWidth()),this.disappearFlag)this.disappearAnimation?this.disappearAnimation(this.wrapper,this.moveRatio):this.animationFlag&&(this.wrapper.style.width=this.wrapperWidth*this.moveRatio+"px",this.wrapper.style.opacity=this.moveRatio);else if(this.newBornFlag){var t=1-this.moveRatio;this.appearAnimation?this.appearAnimation(this.wrapper,t):this.animationFlag&&(this.wrapper.style.width=this.wrapperWidth*t+"px",this.wrapper.style.opacity=t)}e&&this.newBornFlag&&(this.newBornFlag=!1)}}]),e}(),u=function(e){function t(e,i,a){r(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,a)),u=o;return u.value=0,u.isNumber=!0,u.baseRange=a.baseRange,u.diffDistance=0,u.maxValue=a.maxValue||10,u.moveY=0,u.showCurValue=0,u.update(i),o}return i(t,o),a(t,[{key:"mount",value:function(e){var t=document.createElement("div");return this.effectController.mount(t),this.wrapper=t,this.visible=!1,e.appendChild(t),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.rawMode){if(this.showPrevValue=this.showNextValue=e,e===this.value)return void(this.diffDistance=0);this.diffDistance=this.rawDirection,this.value=e}else{var n=t.floor(e/this.baseRange),i=n-this.value;this.diffDistance=i,this.value=n,this.showPrevValue=this.add(this.showCurValue,-1),this.showNextValue=this.add(this.showCurValue,1),this.originCurValue=this.showCurValue}}},{key:"processNumber",value:function(e,n){var i=t.floor((e+n)%this.maxValue);return i<0?this.maxValue+i:i}},{key:"add",value:function(e,t){var n=e+t;return n>=this.maxValue?0:n<0?this.maxValue-1:n}},{key:"updateValue",value:function(e){var n=t.floor(e);this.showCurValue=this.processNumber(this.originCurValue,n),this.showPrevValue=this.add(this.showCurValue,-1),this.showNextValue=this.add(this.showCurValue,1)}},{key:"updateRawValue",value:function(e){1!==e&&-1!==e||(this.showCurValue=this.showPrevValue,this.showPrevValue=this.showNextValue=this.showCurValue)}},{key:"move",value:function(e,t){var n=void 0,i=this.context.transitionTime;0!==this.diffDistance&&(n=e===i?this.diffDistance:this.context.tween(e,0,this.diffDistance,i),this.moveRatio=(i-e)/i,this.moveY=n,this.rawMode?this.updateRawValue(n):this.updateValue(n))}},{key:"render",value:function(e){var t=this.diffDistance;if(0!==t||!this.hasRender){this.hasRender=!0;var n=this.moveY%1;this.animateRender(e),this.effectController.render(t,n)}}}],[{key:"floor",value:function(e){return e<0?-Math.floor(-e):Math.floor(e)}}]),t}(),s=function(e){function t(e,i,a){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,a))}return i(t,o),a(t,[{key:"mount",value:function(e){var t=document.createElement("div");return t.className="tumbling-wrapper",t.innerHTML=this.value,this.wrapper=t,e.appendChild(t),this}},{key:"move",value:function(e,t){var n=this.context.transitionTime;this.moveRatio=(n-e)/n,t&&this.newBornFlag&&(this.newBornFlag=!1)}},{key:"update",value:function(){}},{key:"render",value:function(e){this.animateRender(e)}}]),t}();t.default=function(e,t,n,i){return i?new u(e,t,n):new s(e,t,n)}});t(s);var l=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(u),o=n(s),l=Object.assign,f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=n.thousand,a=i;return a.thousand=r,a.options=n,a.generateNumberItems(a.value),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"generateDomItem",value:function(e,t,n,i,r,a){return o.default(this,t,l({},this.options,{index:n,newBornFlag:a,baseRange:r,maxValue:i}),e)}},{key:"generateNumberItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this,r=t.parseValue(e,n.thousand),a=r.valueStr,o=r.transformValueStr,u=a.length-1,s=document.createDocumentFragment();n.strItems={};var l=0,f=[];a.forEach(function(t,r){var a=Math.pow(10,u-r),c=o[l];if(!i.NUMBER_REG.test(c)){var h=n.generateDomItem(!1,c,r,10,a).mount(s);n.strItems[u-l]=h,l++}l++,f.push(n.generateDomItem(!0,e,r,10,a).mount(s))}),n.items=f,n.dom.appendChild(s)}},{key:"update",value:function(e,n){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,n);if(this.complete(),e!==this.value){var r=t.parseValue(e,this.thousand),a=r.valueStr,o=r.transformValueStr,u=this.items.length,s=a.length,l=s-u,f=void 0;if(l>0){f=[];for(var c=document.createDocumentFragment(),h=s-1,p=0,m=void 0,d=0;d<s;d++){var v=Math.pow(10,h-d),w=o[p];if(m=h-p,!i.NUMBER_REG.test(w)){if(!this.strItems[m]){var y=this.generateDomItem(!1,w,d,10,v,!0).mount(c);this.strItems[m]=y}p++}d<l&&f.push(this.generateDomItem(!0,e,d,10,v,!0).mount(c)),p++}this.dom.insertBefore(c,this.dom.children[0])}else if(l<0){for(var b=0;b<-l;b++)this.items[b].disappear();for(var g in this.strItems){var I=this.strItems[g];(i.NUMBER_REG.test(o[g])||g>=o.length)&&I.disappear()}}this.items.forEach(function(t){t.update(e)}),f&&(this.items=f.concat(this.items)),this.animateId=window.requestAnimationFrame(this.animate),this.value=e}}},{key:"clear",value:function(){this.items=this.items.filter(function(e){return e.disappearFlag&&e.remove(),!e.disappearFlag});for(var e in this.strItems){var t=this.strItems[e];t.disappearFlag&&(t.remove(),delete this.strItems[e])}}}],[{key:"parseValue",value:function(e,t){var n=parseInt(e),i=(""+n).split(""),r=i;return t&&(r=_util.toThousands(n).split("")),{valueStr:i,transformValueStr:r}}}]),t}();t.default=f});t(l);var f=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(u),o=n(s),l=Object.assign,f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return r.value=t.transformValue(r.value),r.stopImmediate=n.stopImmediate||!1,r.maxRandomStep=n.maxRandomStep||100,r.debounceRatio=n.debounceRatio||.3,r.stopFlag=!1,r.onStop=n.onStop,r.options=n,r.generateRawItems(r.value),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"generateRawItems",value:function(e){var t=this,n=document.createDocumentFragment();t.items=e.map(function(e,i){return e.step=e.step||Math.floor(Math.random()*t.maxRandomStep),o.default(t,e.step,l({},t.options,{index:i,baseRange:1,maxValue:e.maxValue||10}),!0).mount(n)}),t.dom.appendChild(n)}},{key:"updateItems",value:function(e){e=e||t.addValue;var n=this;n.value.forEach(function(t,i){var r=n.items[i];r.update(e(r,t)),r.value=r.value%r.maxValue})}},{key:"animateStop",value:function(e){this.stopFlag?this.onStop&&this.onStop(this.items.map(function(e){return e.value%e.maxValue},this)):e&&(this.updateItems(),this.animateTimeStamp=e,this.animateId=window.requestAnimationFrame(this.animate))}},{key:"beforeStart",value:function(){this.stopFlag=!1,this.updateItems()}},{key:"afterStartComplete",value:function(){this.updateItems()}},{key:"stop",value:function(){var e=this;if(!e.stopFlag&&(e.stopFlag=!0,e.animateId)){if(window.cancelAnimationFrame(e.animateId),e.animateId=null,e.render(e.transitionTime,!0),e.stopImmediate)return void e.animateStop();e.updateItems(function(t,n){return t.value+Math.floor(n.step*e.debounceRatio)}),e.animateId=window.requestAnimationFrame(e.animate)}}}],[{key:"transformValue",value:function(e){if("object"!==(void 0===e?"undefined":i(e))){for(var t=[],n=0;n<e;n++)t.push({});return t}return e}},{key:"addValue",value:function(e,t){return e.value+t.step}}]),t}();t.default=f});t(f);var c=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(u),o=n(s),l=Object.assign,f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return r.options=n,r.direction=n.direction||t.ADD,r.init(i.value),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"init",value:function(e){var n=this,r=(e+"").split(""),a=document.createDocumentFragment();n.items=r.map(function(e,r){var u=i.NUMBER_REG.test(e),s=u?parseInt(e):e;return o.default(n,s,l({},n.options,{index:r,rawDirection:n.direction===t.ADD?1:-1,rawMode:!0}),u).mount(a)}),n.dom.appendChild(a)}},{key:"update",value:function(e,n){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,n);var i=this;if(i.animateId&&(window.cancelAnimationFrame(i.animateId),i.animateId=null,i.render(i.transitionTime,!0)),e!==i.value){(e+"").split("").forEach(function(e,t){var n=i.items[t];if(n.isNumber){var r=parseInt(e);n.update(r)}}),i.animateId=window.requestAnimationFrame(i.animate),i.value=e}}}]),t}();f.ADD=0,f.MINUS=1,t.default=f});t(c),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(function(){e(Date.now())},100)};var h=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DomCountdownTumbling=t.DomRawTumbling=t.DomNumberTumbling=t.FlipEffect=void 0,Object.defineProperty(t,"FlipEffect",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(t,"DomNumberTumbling",{enumerable:!0,get:function(){return n(l).default}}),Object.defineProperty(t,"DomRawTumbling",{enumerable:!0,get:function(){return n(f).default}}),Object.defineProperty(t,"DomCountdownTumbling",{enumerable:!0,get:function(){return n(c).default}})}),p=t(h),m=h.DomCountdownTumbling,d=h.DomRawTumbling,v=h.DomNumberTumbling,w=h.FlipEffect;e.default=p,e.DomCountdownTumbling=m,e.DomRawTumbling=d,e.DomNumberTumbling=v,e.FlipEffect=w,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=tumbling.min.js.map
